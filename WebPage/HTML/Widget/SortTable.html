<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <table>
      <tr>
        <th>name</th>
        <th>age</th>
      </tr>
      <tr>
        <td>p1</td>
        <td>34</td>
      </tr>
      <tr>
        <td>p2</td>
        <td>23</td>
      </tr>
      <tr>
        <td>p3</td>
        <td>45</td>
      </tr>
      <tr>
        <td>p4</td>
        <td>12</td>
      </tr>
      <tr>
        <td>p5</td>
        <td>7</td>
      </tr>
      <tr>
        <td>p6</td>
        <td>99</td>
      </tr>
    </table>

    <script type="text/javascript">
      (function(){
        var rows = document.getElementsByTagName('table')[0].rows;
        var temp = [];
        for (var i = 1 ; i < rows.length ; i++) {
          temp[i-1] = rows[i];      // the first row is head
        }
        console.log(temp);
        // sort
        quickSort(temp, 0, temp.length - 1 );
        // append

        for (i = 0 ; i < temp.length ; i++) {
          temp[i].parentNode.appendChild(temp[i])
        }
      })()
      function quickSort(arr, left, right) {
        if (left >= right) return;
        var wall = partition(arr, left, right)
        quickSort(arr, left, wall - 1);
        quickSort(arr, wall + 1, right);
      }
      function partition(arr, left, right) {
        var mid = left + Math.floor((right - left ) / 2);
        swap(arr, mid, right)

        var pivot = right;
        var wall = left;
        for (var i = left ; i < right ; i++) {
          if (!compareRows(arr, i, pivot)) {
            swap(arr, wall, i);
            wall++;
          }
        }
        swap(arr, wall, pivot);
        return wall;
      }
      function compareRows(arr, i, j) {
        var arri = parseInt(arr[i].cells[1].innerHTML)
        var arrj = parseInt(arr[j].cells[1].innerHTML)
        if ( arri >= arrj) return true;
        else return false;
      }
      function swap(arr, i, j) {
        var temp = arr[i];
        arr[i] = arr[j];
        arr[j] = temp;
      }
    </script>
  </body>
</html>
